============================= test session starts ==============================
platform darwin -- Python 3.12.2, pytest-7.4.4, pluggy-1.0.0 -- /opt/anaconda3/bin/python
cachedir: .pytest_cache
rootdir: /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend
configfile: pytest.ini
plugins: anyio-4.11.0, langsmith-0.3.45
collecting ... collected 54 items

tests/llm_security_tests/test_data_leakage.py::TestSensitiveDataProtection::test_api_key_not_in_content FAILED [  1%]
tests/llm_security_tests/test_data_leakage.py::TestSensitiveDataProtection::test_financial_data_protection PASSED [  3%]
tests/llm_security_tests/test_data_leakage.py::TestSensitiveDataProtection::test_internal_notes_protection PASSED [  5%]
tests/llm_security_tests/test_data_leakage.py::TestSensitiveDataProtection::test_password_never_exposed PASSED [  7%]
tests/llm_security_tests/test_data_leakage.py::TestSensitiveDataProtection::test_user_email_protection PASSED [  9%]
tests/llm_security_tests/test_data_leakage.py::TestPIIProtection::test_address_detection PASSED [ 11%]
tests/llm_security_tests/test_data_leakage.py::TestPIIProtection::test_credit_card_detection PASSED [ 12%]
tests/llm_security_tests/test_data_leakage.py::TestPIIProtection::test_email_detection_in_thread_content PASSED [ 14%]
tests/llm_security_tests/test_data_leakage.py::TestPIIProtection::test_phone_number_detection PASSED [ 16%]
tests/llm_security_tests/test_data_leakage.py::TestPIIProtection::test_ssn_detection PASSED [ 18%]
tests/llm_security_tests/test_data_leakage.py::TestCrossUserDataIsolation::test_brand_data_isolation PASSED [ 20%]
tests/llm_security_tests/test_data_leakage.py::TestCrossUserDataIsolation::test_user_campaign_isolation PASSED [ 22%]
tests/llm_security_tests/test_data_leakage.py::TestMetadataLeakage::test_internal_metadata_not_exposed PASSED [ 24%]
tests/llm_security_tests/test_data_leakage.py::TestMetadataLeakage::test_technical_details_protection PASSED [ 25%]
tests/llm_security_tests/test_data_leakage.py::TestTokenAndCostProtection::test_budget_data_protection PASSED [ 27%]
tests/llm_security_tests/test_data_leakage.py::TestTokenAndCostProtection::test_cost_aggregation_protection PASSED [ 29%]
tests/llm_security_tests/test_data_leakage.py::TestTokenAndCostProtection::test_token_usage_protection PASSED [ 31%]
tests/llm_security_tests/test_data_leakage.py::TestSystemPromptProtection::test_model_configuration_protection PASSED [ 33%]
tests/llm_security_tests/test_data_leakage.py::TestSystemPromptProtection::test_prompt_template_protection PASSED [ 35%]
tests/llm_security_tests/test_input_validation.py::TestInputLengthValidation::test_empty_required_fields PASSED [ 37%]
tests/llm_security_tests/test_input_validation.py::TestInputLengthValidation::test_extremely_long_content PASSED [ 38%]
tests/llm_security_tests/test_input_validation.py::TestInputLengthValidation::test_title_length_limits PASSED [ 40%]
tests/llm_security_tests/test_input_validation.py::TestJSONFieldValidation::test_invalid_json_in_keywords PASSED [ 42%]
tests/llm_security_tests/test_input_validation.py::TestJSONFieldValidation::test_json_field_type_safety PASSED [ 44%]
tests/llm_security_tests/test_input_validation.py::TestJSONFieldValidation::test_json_injection_attempts PASSED [ 46%]
tests/llm_security_tests/test_input_validation.py::TestSpecialCharacterHandling::test_control_character_handling FAILED [ 48%]
tests/llm_security_tests/test_input_validation.py::TestSpecialCharacterHandling::test_html_entity_handling PASSED [ 50%]
tests/llm_security_tests/test_input_validation.py::TestSpecialCharacterHandling::test_newline_and_whitespace_handling PASSED [ 51%]
tests/llm_security_tests/test_input_validation.py::TestSpecialCharacterHandling::test_unicode_character_handling PASSED [ 53%]
tests/llm_security_tests/test_input_validation.py::TestURLValidation::test_malicious_urls PASSED [ 55%]
tests/llm_security_tests/test_input_validation.py::TestURLValidation::test_url_length_limits PASSED [ 57%]
tests/llm_security_tests/test_input_validation.py::TestURLValidation::test_valid_urls PASSED [ 59%]
tests/llm_security_tests/test_input_validation.py::TestNumericFieldValidation::test_float_score_ranges PASSED [ 61%]
tests/llm_security_tests/test_input_validation.py::TestNumericFieldValidation::test_integer_overflow FAILED [ 62%]
tests/llm_security_tests/test_input_validation.py::TestNumericFieldValidation::test_negative_numbers_in_counts PASSED [ 64%]
tests/llm_security_tests/test_input_validation.py::TestDateTimeValidation::test_future_dates PASSED [ 66%]
tests/llm_security_tests/test_input_validation.py::TestDateTimeValidation::test_very_old_dates FAILED [ 68%]
tests/llm_security_tests/test_input_validation.py::TestForeignKeyValidation::test_cascade_delete_behavior PASSED [ 70%]
tests/llm_security_tests/test_input_validation.py::TestForeignKeyValidation::test_invalid_foreign_key FAILED [ 72%]
tests/llm_security_tests/test_input_validation.py::TestBatchInputValidation::test_batch_size_limits PASSED [ 74%]
tests/llm_security_tests/test_input_validation.py::TestBatchInputValidation::test_bulk_create_with_mixed_valid_invalid PASSED [ 75%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_basic_prompt_injection_in_thread_content PASSED [ 77%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_data_exfiltration_attempts PASSED [ 79%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_delimiter_injection PASSED [ 81%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_encoding_based_injection PASSED [ 83%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_instruction_override_attempts PASSED [ 85%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_jailbreak_attempts PASSED [ 87%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_multi_language_injection PASSED [ 88%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_nested_instruction_injection PASSED [ 90%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_role_switching_attack PASSED [ 92%]
tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_whitespace_obfuscation FAILED [ 94%]
tests/llm_security_tests/test_prompt_injection.py::TestInputSanitization::test_length_limits PASSED [ 96%]
tests/llm_security_tests/test_prompt_injection.py::TestInputSanitization::test_null_byte_injection FAILED [ 98%]
tests/llm_security_tests/test_prompt_injection.py::TestInputSanitization::test_special_character_handling PASSED [100%]

=================================== FAILURES ===================================
/opt/anaconda3/lib/python3.12/unittest/case.py:727: AssertionError: None is not true
/opt/anaconda3/lib/python3.12/site-packages/psycopg/cursor.py:97: django.db.utils.DataError: PostgreSQL text fields cannot contain NUL (0x00) bytes
/opt/anaconda3/lib/python3.12/site-packages/psycopg/cursor.py:97: django.db.utils.DataError: integer out of range
/Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:467: AttributeError: module 'django.utils.timezone' has no attribute 'utc'
/opt/anaconda3/lib/python3.12/site-packages/psycopg/cursor.py:97: django.db.utils.IntegrityError: insert or update on table "communities" violates foreign key constraint "communities_campaign_id_7a3c850a_fk_campaigns_id"
/opt/anaconda3/lib/python3.12/unittest/case.py:727: AssertionError: False is not true : Should detect obfuscated injection in: I g n o r e   p r e v i o u s   i n s t r u c t i
/opt/anaconda3/lib/python3.12/site-packages/psycopg/cursor.py:97: django.db.utils.DataError: PostgreSQL text fields cannot contain NUL (0x00) bytes
=============================== warnings summary ===============================
../../../../../../../../../opt/anaconda3/lib/python3.12/site-packages/_pytest/config/__init__.py:1373
  /opt/anaconda3/lib/python3.12/site-packages/_pytest/config/__init__.py:1373: PytestConfigWarning: Unknown config option: DJANGO_SETTINGS_MODULE
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

tests/llm_security_tests/test_data_leakage.py:20
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_data_leakage.py:20: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_data_leakage.py:127
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_data_leakage.py:127: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_data_leakage.py:292
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_data_leakage.py:292: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_data_leakage.py:355
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_data_leakage.py:355: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_data_leakage.py:403
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_data_leakage.py:403: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_data_leakage.py:481
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_data_leakage.py:481: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:18
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:18: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:108
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:108: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:182
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:182: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:285
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:285: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:353
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:353: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:426
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:426: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:483
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:483: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_input_validation.py:543
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_input_validation.py:543: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_prompt_injection.py:17
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_prompt_injection.py:17: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

tests/llm_security_tests/test_prompt_injection.py:424
  /Users/jithinkrishnan/Documents/Study/IS06 /MVP/newgit/echo_chamber_analyst/backend/tests/llm_security_tests/test_prompt_injection.py:424: PytestUnknownMarkWarning: Unknown pytest.mark.django_db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.django_db

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/llm_security_tests/test_data_leakage.py::TestSensitiveDataProtection::test_api_key_not_in_content
FAILED tests/llm_security_tests/test_input_validation.py::TestSpecialCharacterHandling::test_control_character_handling
FAILED tests/llm_security_tests/test_input_validation.py::TestNumericFieldValidation::test_integer_overflow
FAILED tests/llm_security_tests/test_input_validation.py::TestDateTimeValidation::test_very_old_dates
FAILED tests/llm_security_tests/test_input_validation.py::TestForeignKeyValidation::test_invalid_foreign_key
FAILED tests/llm_security_tests/test_prompt_injection.py::TestPromptInjectionDefense::test_whitespace_obfuscation
FAILED tests/llm_security_tests/test_prompt_injection.py::TestInputSanitization::test_null_byte_injection
================== 7 failed, 47 passed, 17 warnings in 4.81s ===================
